<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            background-color: #f4f4f4;
            display: flex;
            flex-direction: column;
            height: 100vh; /* Ensure body takes full viewport height */
        }

        .flashes {
            list-style: none;
            padding: 0;
            margin: 0; /* Reset margin */
            width: 100%; /* Full width */
            position: fixed; /* Or absolute, depending on desired behavior with scrolling */
            top: 0;
            left: 0;
            z-index: 1000; /* Ensure flashes are on top */
        }
        .flashes li {
            padding: 10px;
            margin-bottom: 0; /* Remove bottom margin if they stack */
            border-bottom: 1px solid #ddd; /* Separator for multiple flashes */
            text-align: center;
        }
        .flashes .error { background-color: #f8d7da; color: #721c24; }
        .flashes .info { background-color: #d1ecf1; color: #0c5460; }
        .flashes .success { background-color: #d4edda; color: #155724; }

        .tab-container {
            display: flex;
            background-color: #333;
            padding-top: 40px; /* Adjust if flashes are present and fixed */
        }
        .tab-button {
            background-color: #555;
            color: white;
            border: none;
            padding: 14px 20px;
            cursor: pointer;
            font-size: 17px;
            transition: background-color 0.3s;
            border-right: 1px solid #444; /* Separator for tabs */
        }
        .tab-button:last-child {
            border-right: none;
        }
        .tab-button:hover {
            background-color: #777;
        }
        .tab-button.active {
            background-color: #007bff;
        }

        .tab-content-area {
            flex-grow: 1; /* Takes remaining vertical space */
            padding: 20px;
            background-color: #fff;
            overflow-y: auto; /* Add scroll if content overflows */
        }
        .tab-pane {
            display: none; /* Hidden by default */
        }
        .tab-pane.active {
            display: block; /* Shown when active */
        }

        /* Original container styles for the home content, adapted */
        .home-content-container {
            background-color: #fff;
            padding: 30px;
            border-radius: 8px;
            /* box-shadow: 0 0 15px rgba(0,0,0,0.1); Removed as content area has bg */
            text-align: center;
        }
        .home-content-container h1 { color: #333; margin-bottom: 10px; }
        .home-content-container p { color: #555; margin-bottom: 20px; font-size: 1.1em; }
        .user-info { margin-bottom: 25px; }
        .user-info strong { color: #333; }
        .logout-button { display: inline-block; background-color: #dc3545; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px; font-size: 16px; transition: background-color 0.3s; }
        .logout-button:hover { background-color: #c82333; }
        .login-button { display: inline-block; background-color: #007bff; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px; font-size: 16px; transition: background-color 0.3s; }
        .login-button:hover { background-color: #0056b3; }

    </style>
</head>
<body>
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <ul class="flashes">
            {% for category, message in messages %}
                <li class="{{ category }}">{{ message }}</li>
            {% endfor %}
            </ul>
        {% endif %}
    {% endwith %}

    <div class="tab-container">
        <button class="tab-button active" onclick="openTab(event, 'Home')">Home</button>
        {% if current_user.is_authenticated and current_user.is_admin %}
        <button class="tab-button" onclick="openTab(event, 'Admin')">Admin</button>
        {% endif %}
    </div>

    <div class="tab-content-area">
        <div id="Home" class="tab-pane active">
            <div class="home-content-container"> <!-- Re-using a similar container for structure -->
                <h1>Welcome to the Application!</h1>
                {% if current_user.is_authenticated %}
                    <div class="user-info">
                        <p>You are logged in as:</p>
                        <p><strong>Name:</strong> {{ current_user.name }}</p>
                        <p><strong>Email:</strong> {{ current_user.email }}</p>
                        <p><strong>Google ID:</strong> {{ current_user.google_id }}</p>
                        <p><strong>Admin Status:</strong> {{ "Yes" if current_user.is_admin else "No" }}</p>
                    </div>
                    <a href="{{ url_for('logout') }}" class="logout-button">Logout</a>
                {% else %}
                    <p>You are not logged in.</p>
                    <a href="{{ url_for('login') }}" class="login-button">Login</a>
                {% endif %}
            </div>
        </div>

        {% if current_user.is_authenticated and current_user.is_admin %}
        <div id="Admin" class="tab-pane">
            <div class="home-content-container"> <!-- Using similar container for consistency -->
                <h2>Admin Section</h2>
                <p>This is the placeholder for Admin content.</p>
                <p>Welcome, Admin User! You have access to administrative functions.</p>
            </div>
        </div>
        {% endif %}
    </div>

    <script>
        function openTab(evt, tabName) {
            var i, tabcontent, tablinks;

            // Get all elements with class="tab-pane" and hide them
            tabcontent = document.getElementsByClassName("tab-pane");
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].style.display = "none";
                tabcontent[i].classList.remove("active");
            }

            // Get all elements with class="tab-button" and remove the class "active"
            tablinks = document.getElementsByClassName("tab-button");
            for (i = 0; i < tablinks.length; i++) {
                tablinks[i].classList.remove("active");
            }

            // Show the current tab, and add an "active" class to the button that opened the tab
            document.getElementById(tabName).style.display = "block";
            document.getElementById(tabName).classList.add("active");
            evt.currentTarget.classList.add("active");
        }

        // Optional: Automatically open the first tab on page load
        // document.addEventListener("DOMContentLoaded", function() {
        //     document.querySelector('.tab-button').click(); // Click the first tab
        // });
        // The first tab is already set to active by default in HTML, so this might not be strictly needed
        // unless complex dynamic tab generation is involved.
    </script>
</body>
</html>
